<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>PSDLIB compose demo</title>
</head>
<body style="background: lightgray;">
    <p>See the sourcecode for more info. A file should be downloaded automatically.</p>
    <p>My version of Photoshop throws errors for files not ending in ".psd". So I recommend manually renaming the file after the download.</p>
    <script src="../dist/psdlib.js"></script>
    <script>
    var psd = {
        channels: 3,
        height: 10,
        width: 10,
        depth: 8, // optional
        colormode: "RGB", // optional
        imageResources: [ // optional
            {id: 1034, data: new Uint8Array([1])},
        ],
        layers: [ // optional
            {
                top: 0,
                left: 0,
                bottom: 10,
                right: 10,
                channels: [
                    {id:-2, data: new Uint8Array(36).fill(255)}, // optional
                    {id:-1, data: new Uint8Array(100).fill(255)}, // optional
                    {id: 0, data: new Uint8Array(100).fill(255)},
                    {id: 1, data: new Uint8Array(100).fill(100)},
                    {id: 2, data: new Uint8Array(100).fill(0)}
                ],
                blendMode: "normal", // optional, see blendModes.js for all possible values
                opacity: 255, // optional
                clipping: 0, // optional
                flags: [0, 0, 0, 0, 0], // optional
                maskData: { // optional if no channel with id -2 or -3 is present
                    top: 4,
                    left: 4,
                    bottom: 10,
                    right: 10,
                    defaultColor: 255, // optional
                    flags: [0, 0, 0, 0, 0] // optional
                },
                blendingRanges: [ // optional
                    [0, 0, 255, 255], [0, 0, 255, 255], [0, 0, 255, 255], [0, 0, 255, 255], [0, 0, 255, 255],
                    [0, 0, 255, 255], [0, 0, 255, 255], [0, 0, 255, 255], [0, 0, 255, 255], [0, 0, 255, 255]
                ],
                name: "Layer 0",
                additionalLayerInfo: [ // optional
                    {key: "luni", data: "LÃ¤yer 0"},
                    {key: "lyid", data: 0}
                ]
            }
        ],
        imageData: [ // optional
            new Uint8Array(100).fill(255),
            new Uint8Array(100).fill(100),
            new Uint8Array(100).fill(0)
        ]
    };

    var file = PSDLIB.compose(psd, {output: 'blob'});
    window.location = window.URL.createObjectURL(file);
    </script>
</body>
</html>
